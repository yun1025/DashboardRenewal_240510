<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>대시보드 리뉴얼</title>

    <link href="css/common.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
</head>
<body>
    <!-- 왼쪽 메뉴 -->
    <section class="leftMenu">
        <h2 class="hidden">왼쪽 메뉴 영역</h2>
        
        <p class="menuIcon">
            <img src="images/menu.svg" alt="메뉴 아이콘">
        </p>
        
        <ul class="mainMenu">
            <li class="action">
                <img src="images/computer.svg" alt="대시보드 메뉴 아이콘">
                대시보드

                <ul class="subMenu">
                    <li>
                        <a href="predictionReport.html">발전 현황 및 예측 정보</a>
                    </li>
                    <li class="action">
                        <a href="#">발전 현황 및 입찰 정보</a>
                    </li>
                    <li>
                        <a href="predictionType.html">예측유형별 발전 정보</a>
                    </li>
                    <li>
                        <a href="regionPresent.html">지역별 기상/발전 현황</a>
                    </li>
                    <li>
                        <a href="informReport.html">알람 현황</a>
                    </li>
                </ul>
            </li>
            <li class="action">
                <img src="images/user.svg" alt="사용자 메뉴 아이콘">
                사용자

                <ul>
                    <li>
                        <a href="predictionTypeInquiry.html">예측유형별 상세 이력 조회</a>
                    </li>
                    <li>
                        <a href="bidInquiry.html">입찰 이력 조회</a>
                    </li>
                    <li>
                        <a href="bidCreat.html">입찰서 생성</a>
                    </li>
                    <li>
                        <a href="weatheInquiry.html">기상 이력 조회</a>
                    </li>
                    <li>
                        <a href="resultPresent.html">발전실적 수신 현황</a>
                    </li>     
                </ul>
            </li>
            <li class="action">
                <img src="images/gear.svg" alt="관리자 메뉴 아이콘">
                관리자

                <ul>
                    <li>
                        <a href="login.html">로그인</a>
                    </li>
                </ul>
            </li>
        </ul>
    </section>

    <!-- 본문 -->
    <article class="content">
        <h2 class="hidden">본문 내용 영역</h2>

        <header>
            <h1>
                <a href="#">
                    <!--로고 영역-->

                    대시보드 리뉴얼
                </a>
            </h1>

            <ul class="userMenu">
                <li>2024.05.10. 14:00 00</li>
            </ul>
        </header>

        <!-- 발전 현황 및 입찰 정보 -->
        <section class="biddingReport contentStyle">
            <h2>발전 현황 및 입찰 정보</h2>

            <div class="container_01 statistics">
                <section>
                    <h5>설비 용량(MW)</h5>
                    <p>
                        53.400
                        <span>MW</span>
                    </p>

                    <img src="images/icon_01.svg" alt="설비 용량 아이콘">
                </section>

                <section>
                    <h5>실적 발전량</h5>
                    <p>
                        26.697
                        <span>MWh</span>
                    </p>
                    <img src="images/icon_02.svg" alt="실적 발전량 아이콘">
                </section>

                <section>
                    <h5>예측 발전량</h5>
                    <p>
                        19.042 / 21.069
                        <span>MWh</span>
                    </p>

                    <img src="images/icon_03.svg" alt="예측 발전량 아이콘">
                </section>

                <section>
                    <h5>오차율</h5>
                    <p>
                        12.436
                        <span>%</span>
                    </p>

                    <img src="images/icon_04.svg" alt="오차율 아이콘">
                </section>
            </div>

            <div class="container_02">
                <section>
                    <h3>이용률 현황</h3>

                    <div id="useRate" class="chartArea"></div>
                </section>

                <section>
                    <h3 class="hidden">일별 그래프 영역</h3>

                    <div id="lapseRate" class="chartArea"></div>
                </section>
            </div>

            <div class="container_03">
                <section>
                    <h3>전일 오차빈도</h3>

                    <div id="dayFrequency" class="chartArea"></div>

                    <ul class="chackRemarks">
                        <li>
                            <span>6% 이하</span>

                            <p>26%</p>
                        </li>
                        <li>
                            <span>6~8%</span>

                            <p>24%</p>
                        </li>
                        <li>
                            <span>8% 초과</span>

                            <p>50%</p>
                        </li>
                    </ul>
                    
                    <p>(시간대별 실적 발전량 설비용량 대비 10%이상 기준)</p>
                </section>

                <section>
                    <h3>금월 오차빈도</h3>

                    <div id="monthFrequency" class="chartArea">
                        <p class="warningIcon">
                            <img src="images/warning.svg" alt="아이콘에 마우스를 올려주세요" title="리엑트 환경에서 동작하는 라이브러리 입니다">
                        </p>
                    </div>

                    <ul class="totalData">
                        <li>
                            <h5>누적 발전량</h5>
                            <p>
                                7,344
                                <span>MWh</span>
                            </p>
                        </li>
                        <li>
                            <h5>금월 오차율</h5>
                            <p>
                                12.339
                                <span>%</span>
                            </p>
                        </li>
                        <li>
                            <h5>최근 3개월 오차율</h5>
                            <p>
                                12.660
                                <span>%</span>
                            </p>
                        </li>
                    </ul>
                </section>
            </div>
        </section>
    </article>

<script>
//차트 색상
const colors = ['#3894f4', '#05c0e2', '#9c60ef', '#5c56d5'];

//이용률 현황 예시 차트
Highcharts.chart('useRate', {
    colors: colors,
    exporting: {    //차트 내 메뉴 삭제
        enabled: false
    },
    credits: {      //highchart 워터마크 숨김처리
        enabled: false
    },
    chart: {
        type: 'column'
    },
    title: {
        text: ''
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: ['실적', '1차', '2차'],
        crosshair: true,
        accessibility: {
            description: ''
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: ''
        },
        labels: {
            style: {
                color: '#a5abb2'
            }
        },
    },
    tooltip: {
        valueSuffix: ''
    },
    plotOptions: {
        column: {
            pointPadding: 0.3,
            borderWidth: 0
        }
    },
    legend: {
        enabled: false
    },
    series: [
        {
            name: '',
            data: [75, 28, 38],
            colorByPoint: true
        }
    ]
});

//오차율밖에 글씨가 없는 그 그래프 lapseRate
Highcharts.chart('lapseRate', {
    colors: colors,
    exporting: {    //차트 내 메뉴 false 삭제 / true 유지
        enabled: false
    },
    credits: {      //highchart 워터마크 숨김처리
        enabled: false
    },
    chart: {
        zoomType: 'xy'
    },
    title: {
        text: ''
    },
    xAxis: [
        {
            categories: ['1시','2시','3시','4시','5시','6시','7시','8시','9시','10시','11시','12시','13시','14시','15시','16시','17시','18시','19시','20시','21시','22시','23시','24시']
        }
    ],
    yAxis: [
        {
            // Primary yAxis
            labels: {
                style: {
                    color: '#a5abb2'
                }
            },
            title: {
                text: ''
            }
        },
        {
            // Secondary yAxis
            title: {
                text: '',
                style: {
                    color: '#6b8abc'
                }
            },
            labels: {
                format: '{value}',
                style: {
                    color: '#6b8abc'
                }
            },
            opposite: true
        }
    ],
    legend: {
        align: 'right',
        x: 5,
        verticalAlign: 'top',
        y: 0,
        floating: false
    },
    tooltip: {
        shared: false
    },

    series: [
        {
            name: '실적',
            type: 'column',
            data: [5, 10, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 60, 50, 40, 30, 20, 10, 15, 30, 45, 60, 75]
        },
        {
            name: '1차',
            type: 'spline',
            lineWidth: 1,
            data: [5, 10, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 60, 50, 40, 30, 20, 10, 15, 30, 45, 60, 75]
        },
        {
            name: '2차',
            type: 'spline',
            lineWidth: 1,
            data: [15, 20, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 70, 60, 50, 40, 30, 20, 25, 40, 55, 70, 85]
        },
        {
            name: 'Temperature error',
            type: 'errorbar',
            data: [
                [0, 8],
                [5, 13],
                [15, 20],
                [22, 28],
                [28, 33],
                [33, 38],
                [38, 43],
                [43, 48],
                [48, 53],
                [53, 58],
                [58, 63],
                [63, 68],
                [68, 73],
                [58, 63],
                [48, 53],
                [38, 43],
                [28, 33],
                [18, 23],
                [8, 13],
                [13, 18],
                [28, 33],
                [42, 48],
                [58, 63],
                [72, 78]
            ]
        }
    ]
});

//전일 오차빈도 dayFrequency
(function (H) {
    H.seriesTypes.pie.prototype.animate = function (init) {
        const series = this,
            chart = series.chart,
            points = series.points,
            {
                animation
            } = series.options,
            {
                startAngleRad
            } = series;

        function fanAnimate(point, startAngleRad) {
            const graphic = point.graphic,
                args = point.shapeArgs;

            if (graphic && args) {

                graphic
                    // Set inital animation values
                    .attr({
                        start: startAngleRad,
                        end: startAngleRad,
                        opacity: 1
                    })
                    // Animate to the final position
                    .animate({
                        start: args.start,
                        end: args.end
                    }, {
                        duration: animation.duration / points.length
                    }, function () {
                        // On complete, start animating the next point
                        if (points[point.index + 1]) {
                            fanAnimate(points[point.index + 1], args.end);
                        }
                        // On the last point, fade in the data labels, then
                        // apply the inner size
                        if (point.index === series.points.length - 1) {
                            series.dataLabelsGroup.animate({
                                opacity: 1
                            },
                            void 0,
                            function () {
                                points.forEach(point => {
                                    point.opacity = 1;
                                });
                                series.update({
                                    enableMouseTracking: true
                                }, false);
                                chart.update({
                                    plotOptions: {
                                        pie: {
                                            innerSize: '60%',
                                            borderRadius: 8
                                        }
                                    }
                                });
                            });
                        }
                    });
            }
        }

        if (init) {
            // Hide points on init
            points.forEach(point => {
                point.opacity = 0;
            });
        } else {
            fanAnimate(points[0], startAngleRad);
        }
    };
}(Highcharts));

Highcharts.chart('dayFrequency', {
    colors: colors,
    exporting: {    //차트 내 메뉴 false 삭제 / true 유지
        enabled: false
    },
    credits: {      //highchart 워터마크 숨김처리
        enabled: false
    },
    chart: {
        type: 'pie'
    },
    title: {
        text: ''
    },
    tooltip: {
        pointFormat: '<b>{point.percentage:.1f}%</b>'
    },
    accessibility: {
        point: {
            valueSuffix: '%'
        }
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            borderWidth: 2,
            cursor: 'pointer',
            dataLabels: {
                enabled: true,
                format: '',
                distance: 0
            },
        		showInLegend: false
        }
    },
    /*legend: {
        layout: 'vertical',
        align: 'center',
        verticalAlign: 'bottom',
        itemMarginTop: 5,
        labelFormatter: function () {
        	let formatted = this.name + ": " + this.y + "%";
        	return formatted;
        },
    },*/
    series: [{
        // Disable mouse tracking on load, enable after custom animation
        enableMouseTracking: false,
        animation: {
            duration: 1500
        },
        colorByPoint: true,
        data: [{
            name: '6% 이하',
            y: 26
        }, {
            name: '6~8%',
            y: 24
        }, {
            name: '8% 초과',
            y: 50
        }]	
    }]
});

//금일 오차빈도, monthFrequency

</script>
</body>
</html>